<!DOCTYPE html>
<html
	class="has-navbar-fixed-top"
	lang="en"
	xmlns:th="http://www.thymeleaf.org"
>

<head>
<meta charset="utf-8">
<meta
	name="viewport"
	content="width=device-width, initial-scale=1"
>
<link
	rel="shortcut icon"
	href="/favicon.ico"
	type="image/x-icon"
>
<link
	rel="icon"
	type="image/x-icon"
	href="/favicon.ico"
>
<title>the fabulous search results page</title>

<!-- Font Awesome -->
<link
	rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
	crossorigin="anonymous"
>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Bulma CSS -->
<link
	rel="stylesheet"
	type="text/css"
	href="/css/bulma.css"
>

<!-- Custom CSS -->
<link
	rel="stylesheet"
	type="text/css"
	href="/css/common.css"
>
<link
	rel="stylesheet"
	type="text/css"
	href="/css/results.css"
>
<link rel="stylesheet" type="text/css" href="/css/dark-mode.css">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/4.1.0/mustache.min.js"
></script>
	<script src="/js/results.js" defer></script>
	<script src="/js/common.js" defer></script>
	<script src="/js/dark-mode.js" defer></script>


</head>


<body>
	<nav th:replace="fragments/common :: navbar"></nav>
	<section class="hero is-info is-small">
		<div class="hero-body">
			
				<p class="title is-1 has-text-centered">Zettel results</p>
				<p class="subtitle has-text-centered">
					found via search term: <span id="searchTerm"></span>, searched in:
				<span id="searchedVia"></span></p>
			
		</div>
	</section>
	<div class="box cta">
		<p class="has-text-centered">
			<span class="tag is-primary">FOUND</span> <span th:text="${#lists.size(zettels)}"></span>  Zettels:
		</p>
	</div>
	<section class="container">
		<!-- Zettel -->
		<div
			th:if="${zettels}"
			class="columns is-multiline"
		>
			<div
				class="column is-one-third"
				th:each="zettel, iterStat : ${zettels}"
			>
				<div class="card is-shady">
					<div class="card-image">
						<figure class="image is-4by3">
							<img
							th:with="imageNumber=${(iterStat.index + #dates.createNow().getTime()) *23 % 4 + 1}"
							th:src="@{'/images/cards/' + ${imageNumber} + '.jpg'}"
								alt="Placeholder image"
							>
						</figure>
					</div>
					<div class="card-content">
						<div class="content">
							<!-- Topic Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Topic:</span>
								<h4 th:text="${zettel.topic}">Platzhalter für zettel.topic</h4>
							</div>

							<!-- Note Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Note:</span>
								<p class="note-reducer" th:text="${zettel.note.noteText}">Platzhalter für zettel.note.noteText</p>
							</div>

							<!-- Text Title Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Title:</span>
								<h5 th:text="${zettel.tekst.title}">Platzhalter für zettel.tekst.title</h5>
							</div>

							<!-- Text Content Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Text:</span>
								<p class="text-reducer" th:text="${zettel.tekst.text}">Platzhalter für zettel.tekst.</p>
							</div>
							
							<div class="button-group mt-auto">
								<button class="button is-black is-small js-modal-trigger"
									data-target="modal-example"
									th:data-zettel-id="${zettel.zettelId}">preview Text</button>
								<button class="button is-black is-small">
									<a th:href="@{/zettel/{zettelId}(zettelId=${zettel.zettelId})}" target="_blank" rel="noopener noreferrer">Open Zettel</a>
								</button>
								<button class="button is-black is-small">
									<a th:href="@{/search/text/{textId}(textId=${zettel.tekst.textId})}" target="_blank" rel="noopener noreferrer">open text</a>
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Tekst -->
		<div
			th:if="${texts}"
			class="columns is-multiline"
		>
			<div
				class="column is-one-third"
				th:each="text : ${texts}"
			>
				<div class="card is-shady">
					<div class="card-image">
						<figure class="image is-4by3">
							<img
							src="https://res.cloudinary.com/crakerss/image/upload/c_scale,q_auto:eco,w_1440/v1502988509/background_conifer/MS.jpg"
							alt="Placeholder image"
						>
						</figure>
					</div>
					<div class="card-content">
						<div class="content">
							<!-- Title Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Title:</span>
								<h4 th:text="${text.title}">Platzhalter für text.title</h4>
							</div>

							<!-- Text Content Section -->
							<div class="content-section">
								<span class="icon is-small">
									<img th:src="@{/images/arrow.png}" class="is-small" aria-hidden="true" />
								</span>
								<span class="section-label">Text:</span>
								<h5 th:text="${text.text}">Platzhalter für text.text</h5>
							</div>

							<button
								class="button is-black js-modal-trigger"
								data-target="modal-example"
							>
								Open Text
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>


	<!--  
	===============
     MODALS
    ===============  -->
	<!-- modal: the main container -->
	<div
		id="modal-example"
		class="modal"
	>
		<!-- modal-background: a transparent overlay that can act as a click target to close the modal -->
		<div class="modal-background"></div>
		<!-- modal-content: a horizontally and vertically centered container, 
    with a maximum width of 640px, in which you can include any content -->
		<div class="modal-content">
			<!-- This is where the rendered Mustache template will be inserted -->
		</div>
		<button
			class="modal-close is-large"
			aria-label="close"
		></button>
	</div>

	<!-- Mustache template -->
	<script
		id="modal-template"
		type="text/template"
	>
  <div class="box">
    <h2 class="title">{{zettel.topic}}</h2>
    <p class="modal-text">{{modalContent}}</p>
    {{#hasImage}}
    <p class="modal-text">{{tekst}}</p>
    <figure class="image">
      <img src="{{imageUrl}}" alt="{{imageAlt}}">
    </figure>
    {{/hasImage}}
  </div>
</script>
	<!--  ===============
     end of MODALS
    ===============  -->

	<!-- <script src="https://code.jquery.com/jquery-3.7.0.slim.min.js"
    integrity="sha256-tG5mcZUtJsZvyKAxYLVXrmjKBVLd6VpVccqz/r4ypFE=" crossorigin="anonymous"></script> -->
	<!-- 	<script src="/js/wild.js"></script> -->
	<!-- from bulma doc as well -->

</body>

</html>