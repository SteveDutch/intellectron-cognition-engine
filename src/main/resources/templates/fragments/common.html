<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- START NAV -->
<nav th:fragment="navbar" class="navbar has-background-primary-00 is-fixed-top">
	<div class="container ">
		<div class="navbar-brand">
			<a class="navbar-item brand-text has-text-warning" href="/"> intellectron </a>
			<div class="navbar-burger burger" data-target="navMenu">
				<span></span> <span></span> <span></span> <span></span>
			</div>
		</div>
		<div id="navMenu" class="navbar-menu">
			<div class="navbar-start">
				<a class="navbar-item has-text-warning" href="/"> Dashboard </a> <a class="navbar-item has-text-warning"
					href="/search"> Search </a> <a class="navbar-item has-text-warning" href="/input"> New Zettel </a>

			</div>

		</div>
		<!-- Add this in your header/navbar section -->
<button class="button is-small" id="darkModeToggle" aria-label="Dark mode toggle">
  <span class="icon">
    <i class="fas fa-moon"></i>
  </span>
</button>
	</div>
</nav>
<!-- END NAV -->

<!-- START TABLE SORTING RESOURCES -->
<head th:fragment="table-sort-resources">
    <link rel="stylesheet" type="text/css" href="/css/table-sort.css">
    <script type="text/javascript" src="/js/table-sort.js" defer></script>
</head>
<!-- END TABLE SORTING RESOURCES -->

<!-- START SHOW ZETTELS IN TABLE-->
 
	<div th:fragment="zettel-table(zettels)">
		<table class="table is-fullwidth is-bordered is-striped has-background-grey-lighter thick-black-border sortable-table">
			<thead>
				<tr>
					<th>Signature</th>
					<th>Topic</th>
					<th>Note</th>
					<th>Text Title</th>
					<th>Text</th>
					<th data-sort-method='none'>Tags</th>
					<th>References</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${zettels.empty}">
					<td colspan="2">No Zettel Available</td>
				</tr>
				<tr th:each="zettel : ${zettels}">
					<td><a th:href="@{/zettel/{zettelId}(zettelId=${zettel.zettelId})}" target="_blank"
							rel="noopener noreferrer"><span class="showLast" th:text="${zettel.signature}"> signature
							</span></a></td>
					<td><span  th:text="${zettel.topic}"> topic </span></td>
					<td><span  th:if="${zettel.note!= null}"
							th:text="${zettel.note.noteText}">note</span></td>

					<td>
										<a th:href="@{/search/text/{textId}(textId=${zettel.tekst.textId})}"
						target="_blank" rel="noopener noreferrer">
					<span th:text="${zettel.tekst.title}"></span></a></td>

					<td><span th:text="${zettel.tekst.text}"></span></td>
					<td>
						<span th:if="${zettel.tags != null && !#lists.isEmpty(zettel.tags)}">
							<span th:each="tag, iterStat : ${zettel.tags}">
								<a th:href="@{/search/tag/{id}(id=${tag.id})}"
								   target="_blank" rel="noopener noreferrer"
								   th:text="${tag.tagText}">Tag Text</a>
								<span th:if="${!iterStat.last}"> ••• </span>
							</span>
						</span>
						<span th:if="${zettel.tags == null || #lists.isEmpty(zettel.tags)}">
							No tags
						</span>
					</td>
					<td><span th:each="reference : ${zettel.references}"
							th:text="${reference.targetZettel} + ' // ' "></span></td>
				</tr>
			</tbody>
		</table>
	</div>
	<!-- END SHOW ZETTELS IN TABLE -->
	
</html>